# API Contract: AI-тьютор для Synergy LMS (MVP)

Все endpoint’ы работают по HTTPS.  
Формат запросов/ответов: `application/json` (кроме загрузки PDF). 
Аутентификация: временный `userId` (генерируется расширением при первом запуске).  
**Важно**: никакие персональные данные (ФИО, email, группа) не передаются.

---

### 1. Инициализация пользователя и структуры обучения

**Endpoint**: `POST /user/init`  
**Описание**: Возвращает список дисциплин и тем, как они отображаются в LMS (на основе данных, собранных расширением).  
**Тело запроса**:  
```json
{
  "subjects": [
    {
      "id": "subj_123",
      "title": "Маркетинг",
      "topics": [
        { "id": "top_001", "title": "Основы маркетинга", "completed": true }
      ]
    }
  ]
}
```
**Ответ (200)**:
```json
{ "userId": "uuid-123", "status": "ok" }
```
### 2. Генерация персонального плана

**Endpoint**: `POST /plan/generate`  
**Описание**: Расширение отправляет обновлённый статус тем.  
**Тело запроса**:
```json
{
  "hoursPerWeek": 6,
  "preferredDays": ["mon", "wed", "fri"],
  "sessionLength": "short"
}
```
**Ответ (200)**: 
```json
{
  "plan": { "2026-02-03": ["top_002"] },
  "forecast": { "onTrack": true, "message": "Вы успеваете!" }
}
``` 

### 3. Получить мини-квиз по теме

**Endpoint**: `GET /quiz?subjectId=subj_123&topicId=top_002`  
**Описание**: Генерация 3–5 вопросов на понимание темы.  
**Ответ (200)**:
```json
{
  "questions": [
    {
      "id": "q1",
      "text": "Что такое ЦА?",
      "type": "open", // или "multiple_choice"
      "options": null // или ["A", "B", "C"]
    }
  ]
}
```
**Ответ (404)**: 
```json
{ "error": "Topic not found" }
```
### 4. Загрузка PDF и генерация практики  
**Endpoint**: `POST /quiz/generate-from-pdf`  
**Формат**: `multipart/form-data`  
**Поле**: `file` (PDF, ≤10 МБ)  
**Ответ (200)**:
```json
{
  "questions": [
    { "text": "Что такое ЦА?", "type": "open" }
  ],
  "case": "Опишите ЦА для кофейни..."
}
```
**Ошибки**:  
* `400`: "PDF не содержит текста"
* `413`: "Файл слишком большой"
> ⚠️ Важно: вопросы НЕ повторяют реальные тесты LMS. Только обучающие.





